Docker Sonar-Scanner
--------------------

This repository contains base information about gcavalcante8808/sonar-scanner image.

Supported Versions
------------------

The current stable versioni (3.1.0.1141 at this moment) is supported. Check the Supported Versions file at ([Supported Versions](https://github.com/gcavalcante8808/docker-sonar-scanner/blob/master/supported_versions)).

How To use
----------

The image was built an entrypoint script that verify if the file "sonarqube.properties" exists; otherwise, you should provide three env variables:

 * SONAR_SERVER: url address, in the format http://host;
 * SONAR_KEY: api key generated by sonarqube;
 * SONAR_PROJECT: project name in the sonarqube.


If your project have a `sonar-project.properties` file with all needed information, you just need to run the following statement:

```
docker run -it --rm -v /code:/code --workdir /code gcavalcante8808/sonar-scanner
```

Otherwise, you can run the container with minimal options (-Dsonar.projectKey= -Dsonar.host.url= -Dsonar.login=):

```
docker run -it -e SONAR_SERVER=http://example.com -e SONAR_PROJECT=example -e SONAR_KEY=<APIKEY> --rm -v /code:/code gcavalcante8808/sonar-scanner
```

You can still send custom params to the scanner using docker cmd syntax:

```
docker run -it --rm -v /code:/code gcavalcante8808/sonar-scanner -Dsonar.sources=. -Dsonar.python.coverage.reportPath=./coverage.xml -Dsonar.exclusions=**/*.js

# Or, when you dont have sonarqube.properties file
docker run -it -e SONAR_SERVER=http://example.com -e SONAR_PROJECT=example -e SONAR_KEY=<APIKEY> --rm -v /code:/code gcavalcante8808/sonar-scanner -Dsonar.sources=. -Dsonar.python.coverage.reportPath=./coverage.xml -Dsonar.exclusions=**/*.js
```

PS: In these examples, when the sonar-scanner exits the created container is removed automatically.

Docker-Compose Use
------------------

You can still use docker-compose; after cloning and changing the sonar.env file with your environment info, run the following command:

```
docker-compose up
```

**By default, the container expects the code the be bind or mounted at "/code" folder. You can change this behaviour through --workdir option on docker run or working_dir on docker-compose.yml**

Author
------

Author: Gabriel Abdalla Cavalcante Silva (gabriel.cavalcante88@gmail.com)

